{"ast":null,"code":"var _jsxFileName = \"C:\\\\full_stack_project_v0.2\\\\frontend\\\\src\\\\components\\\\ProjectList.js\";\n// src/components/ProjectList.js\nimport ProjectForm from './ProjectForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProjectList = ({\n  project,\n  user,\n  refreshProjects\n}) => {\n  var _project$submissions, _project$submissions2;\n  const isProf = user.role === 'admin';\n  const hasSubmitted = (_project$submissions = project.submissions) === null || _project$submissions === void 0 ? void 0 : _project$submissions.some(s => s.student._id === user._id);\n  const handleFileSubmit = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      await fetch(`http://localhost:5000/api/projects/${project._id}/submit`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        },\n        body: formData\n      });\n      refreshProjects();\n    } catch (err) {\n      alert(\"Erreur lors de l'envoi\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-xl p-8 border-4 border-indigo-100 hover:border-indigo-400 transition-all\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-2xl font-bold text-indigo-800 mb-3\",\n      children: project.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: project.description || 'Pas de description'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500 mb-4\",\n      children: [\"Deadline : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: new Date(project.deadline).toLocaleDateString('fr-FR')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 20\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), project.pdf && /*#__PURE__*/_jsxDEV(\"a\", {\n      href: `http://localhost:5000/${project.pdf}`,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"inline-block mb-6 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-full shadow-lg hover:shadow-xl transition\",\n      children: \"T\\xE9l\\xE9charger le sujet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), !isProf && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-5 bg-gray-50 rounded-xl\",\n      children: hasSubmitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-green-600 font-bold text-xl text-center\",\n        children: \"Rendu soumis avec succ\\xE8s !\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-gray-800 mb-3\",\n          children: \"D\\xE9posez votre compte-rendu :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: handleFileSubmit,\n          className: \"block w-full text-sm text-gray-900 border-2 border-indigo-300 rounded-xl cursor-pointer bg-white p-4 focus:outline-none focus:border-indigo-600\",\n          accept: \".pdf,.zip,.docx\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this), isProf && ((_project$submissions2 = project.submissions) === null || _project$submissions2 === void 0 ? void 0 : _project$submissions2.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 bg-green-50 p-6 rounded-xl border-2 border-green-300\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-bold text-green-800 text-lg mb-3\",\n        children: [project.submissions.length, \" rendu(s) re\\xE7u(s)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), project.submissions.map((sub, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm bg-white p-3 rounded mb-2 shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: sub.student.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this), \" (\", new Date(sub.submittedAt).toLocaleDateString(), \")\", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `http://localhost:5000/${sub.file}`,\n          target: \"_blank\",\n          className: \"ml-3 text-blue-600 underline font-medium\",\n          children: \"Voir le rendu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), isProf && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 text-right\",\n      children: /*#__PURE__*/_jsxDEV(ProjectForm, {\n        currentProject: project,\n        refreshProjects: refreshProjects\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n};\n_c = ProjectList;\nexport default ProjectList;\nvar _c;\n$RefreshReg$(_c, \"ProjectList\");","map":{"version":3,"names":["ProjectForm","jsxDEV","_jsxDEV","ProjectList","project","user","refreshProjects","_project$submissions","_project$submissions2","isProf","role","hasSubmitted","submissions","some","s","student","_id","handleFileSubmit","e","file","target","files","formData","FormData","append","fetch","method","headers","Authorization","localStorage","getItem","body","err","alert","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","description","Date","deadline","toLocaleDateString","pdf","href","rel","type","onChange","accept","length","map","sub","i","submittedAt","currentProject","_c","$RefreshReg$"],"sources":["C:/full_stack_project_v0.2/frontend/src/components/ProjectList.js"],"sourcesContent":["// src/components/ProjectList.js\r\nimport ProjectForm from './ProjectForm';\r\n\r\nconst ProjectList = ({ project, user, refreshProjects }) => {\r\n  const isProf = user.role === 'admin';\r\n  const hasSubmitted = project.submissions?.some(s => s.student._id === user._id);\r\n\r\n  const handleFileSubmit = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      await fetch(`http://localhost:5000/api/projects/${project._id}/submit`, {\r\n        method: 'POST',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n        body: formData\r\n      });\r\n      refreshProjects();\r\n    } catch (err) {\r\n      alert(\"Erreur lors de l'envoi\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl p-8 border-4 border-indigo-100 hover:border-indigo-400 transition-all\">\r\n      <h3 className=\"text-2xl font-bold text-indigo-800 mb-3\">{project.name}</h3>\r\n      <p className=\"text-gray-700 mb-4\">{project.description || 'Pas de description'}</p>\r\n      <p className=\"text-sm text-gray-500 mb-4\">\r\n        Deadline : <strong>{new Date(project.deadline).toLocaleDateString('fr-FR')}</strong>\r\n      </p>\r\n\r\n      {/* Sujet PDF */}\r\n      {project.pdf && (\r\n        <a\r\n          href={`http://localhost:5000/${project.pdf}`}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"inline-block mb-6 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold rounded-full shadow-lg hover:shadow-xl transition\"\r\n        >\r\n          Télécharger le sujet\r\n        </a>\r\n      )}\r\n\r\n      {/* Étudiant : déposer rendu */}\r\n      {!isProf && (\r\n        <div className=\"mt-6 p-5 bg-gray-50 rounded-xl\">\r\n          {hasSubmitted ? (\r\n            <div className=\"text-green-600 font-bold text-xl text-center\">\r\n              Rendu soumis avec succès !\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <p className=\"font-semibold text-gray-800 mb-3\">Déposez votre compte-rendu :</p>\r\n              <input\r\n                type=\"file\"\r\n                onChange={handleFileSubmit}\r\n                className=\"block w-full text-sm text-gray-900 border-2 border-indigo-300 rounded-xl cursor-pointer bg-white p-4 focus:outline-none focus:border-indigo-600\"\r\n                accept=\".pdf,.zip,.docx\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Prof : voir les rendus */}\r\n      {isProf && project.submissions?.length > 0 && (\r\n        <div className=\"mt-6 bg-green-50 p-6 rounded-xl border-2 border-green-300\">\r\n          <p className=\"font-bold text-green-800 text-lg mb-3\">\r\n            {project.submissions.length} rendu(s) reçu(s)\r\n          </p>\r\n          {project.submissions.map((sub, i) => (\r\n            <div key={i} className=\"text-sm bg-white p-3 rounded mb-2 shadow\">\r\n              <strong>{sub.student.name}</strong> ({new Date(sub.submittedAt).toLocaleDateString()})\r\n              <a\r\n                href={`http://localhost:5000/${sub.file}`}\r\n                target=\"_blank\"\r\n                className=\"ml-3 text-blue-600 underline font-medium\"\r\n              >\r\n                Voir le rendu\r\n              </a>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Bouton modifier (prof) */}\r\n      {isProf && (\r\n        <div className=\"mt-6 text-right\">\r\n          <ProjectForm\r\n            currentProject={project}\r\n            refreshProjects={refreshProjects}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}